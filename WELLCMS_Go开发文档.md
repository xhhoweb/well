# WellCMS Go ç‰ˆå¼€å‘æ–‡æ¡£ï¼ˆè®¾è®¡ä¸Žå®žçŽ°æŒ‡å—ï¼‰

> æœ¬æ–‡æ¡£åŸºäºŽ **WellCMS 2.0ï¼ˆPHP + XiunoPHPï¼‰** çš„çŽ°æœ‰è®¾è®¡ï¼Œå®Œæ•´è½¬è¯‘å¹¶å‡çº§ä¸º **Go è¯­è¨€å®žçŽ°æ–¹æ¡ˆ**ã€‚
> ç›®æ ‡ï¼š**é«˜æ€§èƒ½ / é«˜å¹¶å‘ / æ˜“æ‰©å±• / æ˜“ç»´æŠ¤ / é€‚åˆé•¿æœŸè‡ªç ”**ã€‚

---

## ç›®å½•
1. é¡¹ç›®ç›®æ ‡ä¸Žè®¾è®¡åŽŸåˆ™
2. Go æŠ€æœ¯é€‰åž‹
3. æ€»ä½“æž¶æž„è®¾è®¡
4. ç›®å½•ç»“æž„è®¾è®¡ï¼ˆGoï¼‰
5. å¯åŠ¨æµç¨‹ï¼ˆGo ç‰ˆï¼‰
6. é…ç½®ç³»ç»Ÿè®¾è®¡
7. è·¯ç”±ç³»ç»Ÿè®¾è®¡
8. ä¸­é—´ä»¶ä½“ç³»
9. æŽ§åˆ¶å™¨ï¼ˆHandlerï¼‰è®¾è®¡
10. é¢†åŸŸæ¨¡åž‹ï¼ˆModelï¼‰è®¾è®¡
11. æ•°æ®è®¿é—®å±‚ï¼ˆDAO / Repositoryï¼‰
12. ç¼“å­˜ä½“ç³»è®¾è®¡
13. ä¼šè¯ä¸Žç™»å½•ç³»ç»Ÿ
14. æƒé™ä¸Žç”¨æˆ·ç»„è®¾è®¡
15. CMS æ ¸å¿ƒä¸šåŠ¡æ¨¡å—
16. æ’ä»¶ / Hook æœºåˆ¶ï¼ˆGo AOPï¼‰
17. æ¨¡æ¿ä¸Žå‰ç«¯æ¸²æŸ“
18. API è®¾è®¡è§„èŒƒ
19. åŽå°ç®¡ç†ç³»ç»Ÿ
20. å®‰å…¨è®¾è®¡
21. æ€§èƒ½è®¾è®¡ä¸Žä¼˜åŒ–
22. å¼€å‘è§„èŒƒä¸Žä»£ç é£Žæ ¼
23. éƒ¨ç½²æ–¹æ¡ˆ

---

## 1. é¡¹ç›®ç›®æ ‡ä¸Žè®¾è®¡åŽŸåˆ™

### 1.1 é¡¹ç›®ç›®æ ‡
- å®Œæ•´å¤åˆ» WellCMS çš„ **æ•°æ®æ¨¡åž‹ & ä¸šåŠ¡èƒ½åŠ›**
- ä½¿ç”¨ Go å®žçŽ° **æ›´é«˜å¹¶å‘ã€æ›´ä½Žå»¶è¿Ÿ**
- æ”¯æŒ **äº¿çº§æ•°æ®è¡¨** + **æ°´å¹³æ‰©å±•**
- æ”¯æŒ API / SSR / Headless CMS

### 1.2 Go ç‰ˆæ ¸å¿ƒè®¾è®¡åŽŸåˆ™ï¼ˆå¯¹åº” PHP åŽŸåˆ™ï¼‰

| WellCMS åŽŸåˆ™ | Go å®žçŽ°æ–¹å¼ |
|------------|-----------|
| ä¸å†™é‡å¤ä»£ç  | æ¸…æ™°åˆ†å±‚ + æŽ¥å£æŠ½è±¡ |
| MySQL ä¸åšè¿ç®— | æ‰€æœ‰é€»è¾‘åœ¨ Service å±‚ |
| è¡¨å°½é‡åªæŸ¥ä¸€æ¬¡ | å¼ºç¼“å­˜ + èšåˆæŸ¥è¯¢ |
| ä¸åœ¨æ¨¡æ¿å†™ SQL | MVC + DTO |
| è½»é‡ | æ ‡å‡†åº“ + å°‘é‡æˆç†Ÿç»„ä»¶ |

---

## 2. Go æŠ€æœ¯é€‰åž‹

### 2.1 æ ¸å¿ƒæŠ€æœ¯æ ˆ

| é¢†åŸŸ | æŠ€æœ¯ |
|----|----|
| è¯­è¨€ | Go 1.21+ |
| Web æ¡†æž¶ | Gin / Fiberï¼ˆäºŒé€‰ä¸€ï¼‰ |
| ORM | GORMï¼ˆè½»åº¦ä½¿ç”¨ï¼‰/ sqlx |
| æ•°æ®åº“ | MySQL 8 / MariaDB |
| ç¼“å­˜ | Redis |
| Session | Redis + Cookie |
| æ¨¡æ¿ | html/template |
| é…ç½® | Viper |
| æ—¥å¿— | zap / slog |
| ä¾èµ–æ³¨å…¥ | æ‰‹åŠ¨ + æŽ¥å£ |

> æŽ¨èï¼š**Gin + sqlx + Redis**ï¼ˆæ€§èƒ½æœ€æŽ¥è¿‘åŽŸ WellCMSï¼‰

---

## 3. æ€»ä½“æž¶æž„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Nginx      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ main.go      â”‚  â† å¯åŠ¨
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Router       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Middleware   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Controller   â”‚ (Route)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Service      â”‚ (ä¸šåŠ¡)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Repository   â”‚ (DAO)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MySQL/Redis  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. ç›®å½•ç»“æž„è®¾è®¡ï¼ˆGoï¼‰

```
wellcms-go/
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ server/
â”‚       â””â”€â”€ main.go
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ config/          # é…ç½®
â”‚   â”œâ”€â”€ router/          # è·¯ç”±
â”‚   â”œâ”€â”€ middleware/      # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ controller/      # æŽ§åˆ¶å™¨ï¼ˆRouteï¼‰
â”‚   â”œâ”€â”€ service/         # ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ repository/      # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ model/           # æ•°æ®æ¨¡åž‹
â”‚   â”œâ”€â”€ cache/           # ç¼“å­˜å°è£…
â”‚   â”œâ”€â”€ session/         # ä¼šè¯
â”‚   â”œâ”€â”€ auth/            # ç™»å½•è®¤è¯
â”‚   â”œâ”€â”€ permission/      # æƒé™ç³»ç»Ÿ
â”‚   â”œâ”€â”€ plugin/          # æ’ä»¶ç³»ç»Ÿ
â”‚   â””â”€â”€ runtime/         # è¿è¡Œæ—¶æ•°æ®
â”œâ”€â”€ pkg/                 # å¯å¤ç”¨åº“
â”œâ”€â”€ web/
â”‚   â”œâ”€â”€ template/        # å‰å°æ¨¡æ¿
â”‚   â””â”€â”€ admin/           # åŽå°æ¨¡æ¿
â”œâ”€â”€ assets/
â”œâ”€â”€ migrations/
â”œâ”€â”€ go.mod
â””â”€â”€ README.md
```

---

## 5. å¯åŠ¨æµç¨‹ï¼ˆGo ç‰ˆï¼‰

### 5.1 main.go å¯åŠ¨é¡ºåº

1. åŠ è½½é…ç½®ï¼ˆViperï¼‰
2. åˆå§‹åŒ– Logger
3. åˆå§‹åŒ– MySQL
4. åˆå§‹åŒ– Redis
5. åˆå§‹åŒ–ç¼“å­˜
6. åˆå§‹åŒ– Session
7. åˆå§‹åŒ–æ’ä»¶
8. æ³¨å†Œè·¯ç”±
9. å¯åŠ¨ HTTP Server

---

## 6. é…ç½®ç³»ç»Ÿè®¾è®¡

### 6.1 é…ç½®æ–‡ä»¶

```yaml
app:
  name: wellcms-go
  env: prod
  debug: false
server:
  addr: :8080
database:
  dsn: user:pass@tcp(127.0.0.1:3306)/wellcms
redis:
  addr: 127.0.0.1:6379
```

### 6.2 é…ç½®è®¿é—®

- config.App.Debug
- config.Database.DSN

---

## 7. è·¯ç”±ç³»ç»Ÿè®¾è®¡ï¼ˆå¯¹åº” PHP route/ï¼‰

| PHP Route | Go Controller |
|---------|--------------|
| index.php | IndexController |
| read.php | ThreadController.Read |
| list.php | ForumController.List |
| category.php | CategoryController |
| tag.php | TagController |
| user.php | UserController |
| comment.php | CommentController |

### 7.1 è·¯ç”±ç¤ºä¾‹

- `/` é¦–é¡µ
- `/thread/:tid`
- `/forum/:fid`
- `/tag/:name`

---

## 8. ä¸­é—´ä»¶ä½“ç³»

- Recovery
- Logger
- Session
- Auth
- Permission
- RateLimit

---

## 9. Controller è®¾è®¡

åŽŸåˆ™ï¼š
- ä¸å†™ SQL
- ä¸å†™ä¸šåŠ¡åˆ¤æ–­
- åªåšå‚æ•°æ ¡éªŒ + è°ƒç”¨ Service

---

## 10. Model è®¾è®¡ï¼ˆæ˜ å°„ WellCMS è¡¨ï¼‰

```go
type User struct {
  UID int64 `db:"uid"`
  Username string
  Email string
  GID int
}
```

---

## 11. Repositoryï¼ˆDAOï¼‰è®¾è®¡

```go
type UserRepo interface {
  GetByID(uid int64) (*User, error)
  Create(user *User) error
}
```

---

## 12. ç¼“å­˜ä½“ç³»è®¾è®¡

| åŽŸ PHP | Go å®žçŽ° |
|------|--------|
| kv | Redis Hash |
| runtime | context + cache |
| forum_list_cache | Redis + local cache |

---

## 13. Session ä¸Žç™»å½•

- Cookie: sid
- Redis: session data
- æ”¯æŒ Cookie ç™»å½• / Token ç™»å½•

---

## 14. æƒé™ç³»ç»Ÿ

- User â†’ Group
- Group â†’ Permission Map
- Forum Access å•ç‹¬è¡¨

---

## 15. CMS æ ¸å¿ƒæ¨¡å—

- ç”¨æˆ·
- ç‰ˆå—
- ä¸»é¢˜
- è¯„è®º
- æ ‡ç­¾
- å±žæ€§ flag
- å•é¡µ
- é™„ä»¶

ï¼ˆå­—æ®µä¸Ž WellCMS å®Œå…¨ä¸€è‡´ï¼‰

---

## 16. æ’ä»¶ / Hook æœºåˆ¶ï¼ˆGoï¼‰

```go
plugin.Register("thread.create.after", func(ctx Context) {})
```

æ”¯æŒï¼š
- Before / After
- è¦†ç›–å¼ Handler

---

## 17. æ¨¡æ¿ç³»ç»Ÿ

- html/template
- å…¨å±€ FuncMap
- æ”¯æŒå¤šä¸»é¢˜

---

## 18. API è®¾è®¡

- RESTful
- JSON
- /api/v1/

---

## 19. åŽå°ç®¡ç†

- /admin
- ç‹¬ç«‹è·¯ç”±ç»„
- RBAC æŽ§åˆ¶

---

## 20. å®‰å…¨è®¾è®¡

- XSS è¿‡æ»¤
- CSRF Token
- SQL æ³¨å…¥ï¼ˆPreparedï¼‰
- å¯†ç  bcrypt

---

## 21. æ€§èƒ½è®¾è®¡

- è¯»å¤šå†™å°‘ï¼šRedis
- ç´¢å¼•ä¸Žåˆ†é¡µ
- çƒ­æ•°æ®å†…å­˜ç¼“å­˜

---

## 22. å¼€å‘è§„èŒƒ

- æ¯å±‚åªåšä¸€ä»¶äº‹
- å¿…é¡»å†™æŽ¥å£
- ç¦æ­¢è·¨å±‚è°ƒç”¨

---

## 23. éƒ¨ç½²æ–¹æ¡ˆ

- Nginx + Go Binary
- Docker
- Kubernetesï¼ˆå¯é€‰ï¼‰

---

å¦‚æžœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥ï¼š
- ðŸ”¥ **ç›´æŽ¥å¸®ä½ ç”Ÿæˆ Go é¡¹ç›®éª¨æž¶**
- ðŸ”¥ **é€è¡¨ç”Ÿæˆ Go Model + Repo**
- ðŸ”¥ **æŒ‰ WellCMS ä¸€ä¸ªæ¨¡å—ä¸€ä¸ªæ¨¡å—è½åœ°**

ä½ ä¸‹ä¸€æ­¥æƒ³ä»Žå“ªé‡Œå¼€å§‹ï¼Ÿ


---

# é™„å½• Aï¼šæž¶æž„å®ˆåˆ™ï¼ˆArchitecture Rulesï¼‰

> æœ¬æ–‡ä»¶ç­‰åŒäºŽé¡¹ç›®æœ€é«˜è®¾è®¡çº¦æŸï¼Œä¼˜å…ˆçº§é«˜äºŽä»»ä½•ä¸šåŠ¡éœ€æ±‚ã€‚

## A1. è¿è¡ŒçŽ¯å¢ƒé“å¾‹
- é»˜è®¤ç›®æ ‡çŽ¯å¢ƒï¼š**1 æ ¸ / 1G / å•å®žä¾‹**
- ç¦æ­¢å‡è®¾æ›´é«˜é…ç½®
- ç¦æ­¢é€šè¿‡â€œåŠ æœºå™¨â€è§£å†³è®¾è®¡é—®é¢˜

## A2. æ•°æ®åº“é“å¾‹
- MySQL åªå­˜æ•°æ®ï¼Œä¸è®¡ç®—é€»è¾‘
- ç¦æ­¢å¤æ‚ SQLï¼ˆå­æŸ¥è¯¢ / çª—å£å‡½æ•° / è§¦å‘å™¨ï¼‰
- å¿…é¡»ä½¿ç”¨ç´¢å¼•å‘½ä¸­æŸ¥è¯¢

## A3. æŸ¥è¯¢é“å¾‹
- ä¸€ä¸ª HTTP è¯·æ±‚ï¼Œåªå…è®¸ä¸€æ¬¡æ ¸å¿ƒè¡¨æŸ¥è¯¢
- å…³è”æ•°æ®å¿…é¡»ç¼“å­˜æˆ–å†—ä½™

## A4. ç¼“å­˜é“å¾‹
- ç¼“å­˜æ˜¯è®¾è®¡é¡¹ï¼Œä¸æ˜¯è¡¥ä¸
- æ¯ä¸ªç¼“å­˜å¿…é¡»å®šä¹‰ï¼šKey / TTL / å¤±æ•ˆæ¡ä»¶

## A5. ç»„ä»¶é“å¾‹
- ç¦æ­¢ä¸ºâ€œçœ‹èµ·æ¥é«˜çº§â€å¼•å…¥ç»„ä»¶
- é»˜è®¤æŠ€æœ¯é›†ï¼šGo + MySQL + Redis

## A6. ä»£ç é“å¾‹
- ç®€å•ä¼˜äºŽèªæ˜Ž
- å¯è¯»æ€§é«˜äºŽæŠ½è±¡
- å‡½æ•°å•ä¸€èŒè´£

## A7. æ’ä»¶é“å¾‹
- æ’ä»¶ä¸å¯ä¾µå…¥å†…æ ¸
- æ’ä»¶åªèƒ½ç›‘å¬äº‹ä»¶ï¼Œä¸å¯ç¯¡æ”¹æ ¸å¿ƒæµç¨‹

## A8. æ¨¡æ¿é“å¾‹
- æ¨¡æ¿ä¸å†™ä¸šåŠ¡é€»è¾‘
- æ¨¡æ¿åªæ¸²æŸ“ DTO

## A9. ç»“æž„é“å¾‹
- ä¼˜å…ˆä¼˜åŒ–æ•°æ®ç»“æž„ï¼Œå…¶æ¬¡ä»£ç 
- ä»»ä½•æ€§èƒ½é—®é¢˜å…ˆæ£€æŸ¥è¡¨ç»“æž„å’Œç´¢å¼•

## A10. å›žé€€é“å¾‹
- æ‰€æœ‰ä¼˜åŒ–å¿…é¡»å¯å…³é—­
- æ‰€æœ‰åŠŸèƒ½å¿…é¡»å¯é™çº§

---

# é™„å½• Bï¼šæ ¸å¿ƒè¡¨ç»“æž„è®¾è®¡ï¼ˆä»¥ thread ä¸ºä¾‹ï¼‰

## B1. thread è¡¨è®¾è®¡åŽŸåˆ™
- å­—æ®µå°‘
- ç±»åž‹å°
- ç´¢å¼•æ˜Žç¡®
- ä¸ºâ€œè¯»â€æœåŠ¡

## B2. thread è¡¨ç»“æž„ç¤ºä¾‹
```sql
CREATE TABLE thread (
  tid BIGINT UNSIGNED PRIMARY KEY,
  fid INT UNSIGNED NOT NULL,
  uid INT UNSIGNED NOT NULL,
  subject VARCHAR(120) NOT NULL,
  views INT UNSIGNED NOT NULL DEFAULT 0,
  replies INT UNSIGNED NOT NULL DEFAULT 0,
  dateline INT UNSIGNED NOT NULL,
  lastpost INT UNSIGNED NOT NULL,
  status TINYINT UNSIGNED NOT NULL DEFAULT 0,
  KEY idx_fid_lastpost (fid, lastpost),
  KEY idx_uid (uid)
) ENGINE=InnoDB;
```

### è®¾è®¡è¯´æ˜Ž
- ä¸ join user è¡¨
- username å¯å†—ä½™
- lastpost ç”¨äºŽåˆ—è¡¨æŽ’åº

---

# é™„å½• Cï¼šæžé™æ€§èƒ½ Thread è¯»å– Serviceï¼ˆGo ç¤ºä¾‹ï¼‰

## C1. Service è®¾è®¡ç›®æ ‡
- ä¸€æ¬¡ SQL
- å‘½ä¸­ç´¢å¼•
- å¯ç¼“å­˜

## C2. Repository ç¤ºä¾‹
```go
type ThreadRepo struct {
  db *sqlx.DB
}

func (r *ThreadRepo) GetByID(tid int64) (*Thread, error) {
  var t Thread
  err := r.db.Get(&t, `SELECT * FROM thread WHERE tid=?`, tid)
  return &t, err
}
```

## C3. Service ç¤ºä¾‹ï¼ˆå«ç¼“å­˜ï¼‰
```go
func (s *ThreadService) GetThread(ctx context.Context, tid int64) (*ThreadDTO, error) {
  cacheKey := fmt.Sprintf("thread:%d", tid)

  if v, ok := s.cache.Get(cacheKey); ok {
    return v.(*ThreadDTO), nil
  }

  t, err := s.repo.GetByID(tid)
  if err != nil {
    return nil, err
  }

  dto := MapThreadToDTO(t)
  s.cache.Set(cacheKey, dto, 60*time.Second)
  return dto, nil
}
```

## C4. å…³é”®ç‚¹è¯´æ˜Ž
- æ—  join
- DTO æ˜ å°„ä¸€æ¬¡å®Œæˆ
- ç¼“å­˜å¯éšæ—¶å…³é—­

---

# é™„å½• Dï¼šè¿è¡Œæ—¶ä¼˜åŒ–è®¾è®¡ï¼ˆå¯¹åº” WellCMS æžé™æ€§èƒ½æ€æƒ³ï¼‰

> æœ¬é™„å½•ç”¨äºŽè¡¥é½ PHP WellCMS ä¸­â€œéšæ€§ä½†æžå…¶å…³é”®â€çš„æ€§èƒ½è®¾è®¡ï¼Œåœ¨ Go ç‰ˆæœ¬ä¸­å¿…é¡»**æ˜¾å¼å®žçŽ°**ã€‚

---

## D1. ç¼“å­˜é¢„çƒ­æœºåˆ¶ï¼ˆCache Warm-Upï¼‰

### åŽŸ WellCMS çš„éšæ€§åšæ³•
- é€šè¿‡ runtime å…¨å±€å˜é‡
- hook è¡¨é›†ä¸­åŠ è½½
- é¦–æ¬¡è¯·æ±‚åŽå¸¸é©»å†…å­˜

**æœ¬è´¨ï¼šé¿å…é«˜é¢‘æ•°æ®åœ¨é«˜å³°æœŸç¬¬ä¸€æ¬¡å‘½ä¸­æ•°æ®åº“**

### Go ç‰ˆé“å¾‹
> **é«˜é¢‘æ•°æ®å¿…é¡»æ”¯æŒâ€œä¸»åŠ¨é¢„çƒ­â€ï¼Œè€Œä¸æ˜¯è¢«åŠ¨åŠ è½½**

### å…¸åž‹é¢„çƒ­å¯¹è±¡
- forum åˆ—è¡¨
- æ ç›®æƒé™
- hook / plugin åˆ—è¡¨
- ç«™ç‚¹é…ç½®é¡¹

### é¢„çƒ­è§¦å‘æ—¶æœº
- ç¨‹åºå¯åŠ¨
- é…ç½®å˜æ›´åŽ
- ç®¡ç†åŽå°æ‰‹åŠ¨è§¦å‘

---

## D2. Service å±‚ç¼“å­˜ç­–ç•¥åˆ†çº§

### 1ï¸âƒ£ å¼ºç¼“å­˜ï¼ˆStrong Cacheï¼‰

**ç‰¹å¾**ï¼š
- ç§’çº§ TTLï¼ˆ30~120sï¼‰
- ä¸å‚ä¸Žä¸€è‡´æ€§è®¡ç®—
- ç”¨äºŽæŠ—é«˜å¹¶å‘

**é€‚ç”¨åœºæ™¯**ï¼š
- é¦–é¡µ
- forum åˆ—è¡¨
- çƒ­é—¨ thread

---

### 2ï¸âƒ£ è½¯ç¼“å­˜ï¼ˆSoft Cacheï¼‰

**ç‰¹å¾**ï¼š
- å…è®¸çŸ­æ—¶é—´è„æ•°æ®
- æ”¯æŒæ‰‹åŠ¨å¤±æ•ˆ
- å¯åŽå°åˆ·æ–°

**é€‚ç”¨åœºæ™¯**ï¼š
- thread è¯¦æƒ…
- tag èšåˆ
- ç”¨æˆ·ç»Ÿè®¡æ•°æ®

---

### 3ï¸âƒ£ é¢„çƒ­ç¼“å­˜ï¼ˆWarm Cacheï¼‰

**ç‰¹å¾**ï¼š
- æ— ç”¨æˆ·è§¦å‘
- ç”±ç³»ç»Ÿä¸»åŠ¨ç”Ÿæˆ
- å¸¸é©»å†…å­˜ / Redis

**é€‚ç”¨åœºæ™¯**ï¼š
- forum ç»“æž„
- hook åˆ—è¡¨
- æƒé™çŸ©é˜µ

---

## D3. pool å¤ç”¨ç­–ç•¥ï¼ˆGo å¯¹åº” OPcache / runtimeï¼‰

### åŽŸ WellCMS åšæ³•
- PHP opcode cache
- runtime å…¨å±€æ•°ç»„

### Go ç­‰ä»·å®žçŽ°

#### 1ï¸âƒ£ å¯¹è±¡æ± ï¼ˆsync.Poolï¼‰
- DTO
- ä¸´æ—¶ slice / map
- åå¤ä½¿ç”¨çš„ç»“æž„ä½“

#### 2ï¸âƒ£ è¿žæŽ¥æ± 
- database/sql è‡ªå¸¦
- Redis client pool

#### 3ï¸âƒ£ Handler çº§å¤ç”¨
- ç¦æ­¢ handler å†…é¢‘ç¹ new å¤§å¯¹è±¡

---

## D4. å‡å°‘ GC åŽ‹åŠ›çš„è®¾è®¡åŽŸåˆ™

### é“å¾‹
> **å‡å°‘ GCï¼Œæ¯”ä¼˜åŒ–ç®—æ³•æ›´é‡è¦**

### è½åœ°è§„åˆ™
- é¿å…ä¸´æ—¶å¤§ slice
- é¿å… interface{} æ»¥ç”¨
- DTO æ˜Žç¡®å­—æ®µ
- ç¦æ­¢ map[string]interface{}

---

## D5. Hook è¡¨é›†ä¸­åŒ–çš„çœŸæ­£æ„ä¹‰ï¼ˆå…³é”®è¡¥å……ï¼‰

### åŽŸ WellCMS è®¾è®¡
- æ‰€æœ‰ hook å­˜åœ¨ä¸€å¼ è¡¨
- å¯åŠ¨æ—¶ä¸€æ¬¡æ€§åŠ è½½

### çœŸæ­£å‡å°‘çš„ä¸æ˜¯â€œæŸ¥è¯¢â€ï¼Œè€Œæ˜¯ï¼š

| å‡å°‘é¡¹ | è¯´æ˜Ž |
|------|----|
| æ–‡ä»¶æ‰«æ | ä¸éåŽ†æ’ä»¶ç›®å½• |
| æ¡ä»¶åˆ¤æ–­ | ä¸åœ¨æ¯æ¬¡è¯·æ±‚åˆ¤æ–­æ’ä»¶æ˜¯å¦å­˜åœ¨ |
| include æˆæœ¬ | ä¸åå¤ include PHP æ–‡ä»¶ |
| runtime åˆ†æ”¯ | æ‰§è¡Œè·¯å¾„å›ºå®š |

ðŸ‘‰ **è¿™æ˜¯ä¸€ç§â€œæ‰§è¡Œè·¯å¾„æ”¶æ•›â€è®¾è®¡**

---

## D6. Go ç‰ˆ Hook çš„ç­‰ä»·ä¼˜åŒ–ç›®æ ‡

> **ä¸æ˜¯ä¸ºäº†æ’ä»¶çµæ´»ï¼Œè€Œæ˜¯ä¸ºäº†è®©æ‰§è¡Œè·¯å¾„å¯é¢„æµ‹ã€å¯ç¼“å­˜**

### Go å®žçŽ°è¦æ±‚
- hook åœ¨å¯åŠ¨æœŸåŠ è½½
- hook åˆ—è¡¨å¸¸é©»å†…å­˜
- è¯·æ±‚æœŸåªåš slice éåŽ†
- ç¦æ­¢è¿è¡ŒæœŸä¿®æ”¹ hook åˆ—è¡¨

---

> è‡³æ­¤ï¼ŒWellCMS Go ç‰ˆå·²å®Œæ•´è¦†ç›–ï¼š
> - ä½œè€…æ˜¾æ€§è®¾è®¡
> - ä½œè€…éšæ€§æ€§èƒ½ä¼˜åŒ–
> - PHP runtime ç‰¹æ€§åœ¨ Go ä¸­çš„ç­‰ä»·å®žçŽ°


